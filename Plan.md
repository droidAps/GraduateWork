# План автоматизации тестирования комплексного сервиса, взаимодействующего с СУБД и API Банка

## Содержание
1. Перечень автоматизируемых сценариев
2. Перечень используемых инструментов
3. Перечень и описание возможных рисков при автоматизации
4. Интервальная оценка с учётом рисков
5. План сдачи работ

## Перечень автоматизируемых сценариев

### Предусловия:
1. Комплексный сервис должен быть запущен (СУБД, симулятор банковских сервисов, веб-сервис);
2. Перед каждым прохождением сценария таблицы БД должны быть очищены от старых данных.
3. Открыт локальный порт 8080 (веб-сервис).

### Важное: 
**Разработчиками заявлена поддержка двух СУБД: MySQL и PostgreSQL. В связи с этим, будут сделаны прогоны всех тестовых сценариев для обеих СУБД.**

### Позитивные сценарии
#### Тестовые данные:
При прохождении позитивных сценариев формы веб-сервиса должны заполняться следующими тестовыми данными:
1. Номер карты: 4444 4444 4444 4441 (операции по этой карте проходят со статусом "APPROVED");
2. Срок действия карты: не позднее 5 лет с даты тестирования;
3. Владелец: имя и фамилия на английском языке (например, John Smith);
4. Код CVC/CVV: значение от 000 до 999.

#### 1. Сценарий покупки тура с оплатой по дебетовой карте со статусом операции "APPROVED".
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Заполнить форму тестовыми данными;
3. Нажать кнопку "Продолжить".

Ожидаемый результат:
- Появление сообщения об успешной операции;
- Соотвествие данных, записанных в базу данных, способу оплаты (статус операции "APPROVED", расположение информации об операции в соответствующей таблице БД).

#### 2. Сценарий покупки тура с оплатой в кредит со статусом операции "APPROVED".
Шаги воспроизведения:
1. Нажать кнопку "Купить в кредит";
2. Заполнить форму тестовыми данными;
3. Нажать кнопку "Продолжить".

Ожидаемый результат:
- Появление сообщения об успешной операции;
- Соотвествие данных, записанных в базу данных, способу оплаты (статус операции "APPROVED", расположение информации об операции в соответствующей таблице БД).

### Негативные сценарии
#### Тестовые данные:
При прохождении негативных сценариев формы веб-сервиса должны заполняться следующими тестовыми данными:
1. Номер карты:
- 4444 4444 4444 4442 (операции по этой карте проходят со статусом "DECLINED");
- случайно сгенерированный номер карты (номер не прописан в данных симулятора);
3. Срок действия карты: не позднее 5 лет с даты тестирования
4. Владелец: имя и фамилия на английском языке (например, John Smith)
5. Код CVC/CVV: значение от 000 до 999

#### 1. Сценарий покупки тура с оплатой по дебетовой карте со статусом операции "DECLINED".
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Заполнить форму тестовыми данными (номер карты - 4444 4444 4444 4442);
3. Нажать кнопку "Продолжить".

Ожидаемый результат:
- Появление сообщения об отказе в проведении операции;
- Соотвествие данных, записанных в базу данных, способу оплаты (статус операции "DECLINED", расположение информации об операции в соответствующей таблице БД).

#### 2. Сценарий покупки тура с оплатой в кредит со статусом операции "DECLINED".
Шаги воспроизведения:
1. Нажать кнопку "Купить в кредит";
2. Заполнить форму тестовыми данными (номер карты - 4444 4444 4444 4442);
3. Нажать кнопку "Продолжить".

Ожидаемый результат:
- Появление сообщения об отказе в проведении операции;
- Соотвествие данных, записанных в базу данных, способу оплаты (статус операции "DECLINED", расположение информации об операции в соответствующей таблице БД).

#### 3. Сценарий покупки тура с оплатой по дебетовой карте не зарегистрированной в сервисе.
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Заполнить форму тестовыми данными (случайно сгенерированный номер карты);
3. Нажать кнопку "Продолжить".

Ожидаемый результат:
- Появление сообщения об отказе в проведении операции;
- Данные по данной операции отсутствуют в базе данных.

#### 4. Сценарий покупки тура с оплатой в кредит по номеру карты не зарегистрированной в сервисе.
Шаги воспроизведения:
1. Нажать кнопку "Купить в кредит";
2. Заполнить форму тестовыми данными (случайно сгенерированный номер карты);
3. Нажать кнопку "Продолжить".

Ожидаемый результат:
- Появление сообщения об отказе в проведении операции;
- Данные по данной операции отсутствуют в базе данных.

## Перечень используемых инструментов
#### 1. Junit5 - среда для создания и запуск тестов;
#### 2. Faker - библиотека для создания тестовых данных;
#### 3. Selenide - фреймворк для работы с веб-элементами;
#### 4. Apache Commons DbUtils — набор классов, делающих работу с JDBC проще;
#### 5. Драйвер, позволяющий подключаться к БД;
#### 6. DBeaver - клиентское приложение для управления базами данных.

## Перечень и описание возможных рисков при автоматизации
#### 1. Нестабильные тесты. Ошибки в коде авто-тестов могут привести к "ложным" результатам;
#### 2. Нестабильное тестовое окружение. Использование симулятора банковских сервисов при автоматизации снижает качество тестирования. Результаты взаимодействия приложения с настоящими банковскими сервисами могут существенно отличаться.
#### 3. Малая зона покрытия. Локальное тестирование комплексного сервиса не охватывает интеграцию приложения с настоящими БД и банковскими сервисами.

## Интервальная оценка с учётом рисков
### 20-30 часов.

##План сдачи работ
#### 1. Авто-тесты - 28.02.2022
#### 2. Отчёт по итогам автоматизированного тестирования - 05.03.2022
#### 3. Отчёт по автоматизации - 10.03.2022