# План автоматизации тестирования комплексного сервиса, взаимодействующего с СУБД и API Банка

## Содержание
1. Перечень автоматизируемых сценариев
2. Перечень используемых инструментов
3. Перечень и описание возможных рисков при автоматизации
4. Интервальная оценка с учётом рисков
5. План сдачи работ

## Перечень автоматизируемых сценариев

### Предусловия:
1. Комплексный сервис должен быть запущен (СУБД, симулятор банковских сервисов, веб-сервис);
2. Перед каждым прохождением сценария таблицы БД должны быть очищены от старых данных.
3. Открыт локальный порт 8080 (веб-сервис).

### Важное: 
**Разработчиками заявлена поддержка двух СУБД: MySQL и PostgreSQL. В связи с этим, будут сделаны прогоны всех тестовых сценариев для обеих СУБД.**

### 1. Позитивные сценарии
### Проверка функционала комплексного сервиса покупки тура 
#### Тестовые данные:
При прохождении позитивных сценариев формы веб-сервиса должны заполняться следующими тестовыми данными:
1. Номер карты: 4444 4444 4444 4441 (операции по этой карте проходят со статусом "APPROVED");
2. Срок действия карты: не позднее 5 лет с даты тестирования;
3. Владелец: имя и фамилия на английском языке (например, John Smith);
4. Код CVC/CVV: значение от 000 до 999.

#### BT-1. Сценарий покупки тура с оплатой по дебетовой карте со статусом операции "APPROVED".
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Заполнить форму тестовыми данными;
3. Нажать кнопку "Продолжить".

Ожидаемый результат: появление сообщения об успешной операции.

#### BT-2. Сценарий проверки данных в БД при оплате тура по дебетовой карте со статусом операции "APPROVED".
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Заполнить форму тестовыми данными;
3. Нажать кнопку "Продолжить".

Ожидаемый результат: соотвествие данных, записанных в базу данных, способу оплаты (статус операции "APPROVED", расположение информации об операции в соответствующей таблице БД).

#### BT-3. Сценарий покупки тура с оплатой в кредит со статусом операции "APPROVED".
Шаги воспроизведения:
1. Нажать кнопку "Купить в кредит";
2. Заполнить форму тестовыми данными;
3. Нажать кнопку "Продолжить".

Ожидаемый результат: появление сообщения об успешной операции.

#### BT-4. Сценарий проверки данных в БД при оплате тура в кредит со статусом операции "APPROVED".
Шаги воспроизведения:
1. Нажать кнопку "Купить в кредит";
2. Заполнить форму тестовыми данными;
3. Нажать кнопку "Продолжить".

Ожидаемый результат: соотвествие данных, записанных в базу данных, способу оплаты (статус операции "APPROVED", расположение информации об операции в соответствующей таблице БД).

### 2. Негативные сценарии
### Проверка функционала комплексного сервиса покупки тура
#### Тестовые данные:
При прохождении негативных сценариев формы веб-сервиса должны заполняться следующими тестовыми данными:
1. Номер карты:
- 4444 4444 4444 4442 (операции по этой карте проходят со статусом "DECLINED");
- случайно сгенерированный номер карты (номер не прописан в данных симулятора);
3. Срок действия карты: не позднее 5 лет с даты тестирования;
4. Владелец: имя и фамилия на английском языке (например, John Smith);
5. Код CVC/CVV: значение от 000 до 999.

#### BT-5. Сценарий покупки тура с оплатой по дебетовой карте со статусом операции "DECLINED".
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Заполнить форму тестовыми данными (номер карты - 4444 4444 4444 4442);
3. Нажать кнопку "Продолжить".

Ожидаемый результат: появление сообщения об отказе в проведении операции.

#### BT-6. Сценарий проверки данных в БД при оплате тура по дебетовой карте со статусом операции "DECLINED".
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Заполнить форму тестовыми данными (номер карты - 4444 4444 4444 4442);
3. Нажать кнопку "Продолжить".

Ожидаемый результат: соотвествие данных, записанных в базу данных, способу оплаты (статус операции "DECLINED", расположение информации об операции в соответствующей таблице БД).

#### BT-7. Сценарий покупки тура с оплатой в кредит со статусом операции "DECLINED".
Шаги воспроизведения:
1. Нажать кнопку "Купить в кредит";
2. Заполнить форму тестовыми данными (номер карты - 4444 4444 4444 4442);
3. Нажать кнопку "Продолжить".

Ожидаемый результат: появление сообщения об отказе в проведении операции.

#### BT-8. Сценарий проверки данных в БД при оплате тура в кредит со статусом операции "DECLINED".
Шаги воспроизведения:
1. Нажать кнопку "Купить в кредит";
2. Заполнить форму тестовыми данными (номер карты - 4444 4444 4444 4442);
3. Нажать кнопку "Продолжить".

Ожидаемый результат: соотвествие данных, записанных в базу данных, способу оплаты (статус операции "DECLINED", расположение информации об операции в соответствующей таблице БД).

#### BT-9. Сценарий покупки тура с оплатой по дебетовой карте не зарегистрированной в сервисе.
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Заполнить форму тестовыми данными (случайно сгенерированный номер карты);
3. Нажать кнопку "Продолжить".

Ожидаемый результат: появление сообщения об отказе в проведении операции.

#### BT-10. Сценарий проверки данных в БД при оплате тура по дебетовой карте не зарегистрированной в сервисе.
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Заполнить форму тестовыми данными (случайно сгенерированный номер карты);
3. Нажать кнопку "Продолжить".

Ожидаемый результат: данные по данной операции отсутствуют в базе данных.

#### BT-11. Сценарий покупки тура с оплатой в кредит по номеру карты не зарегистрированной в сервисе.
Шаги воспроизведения:
1. Нажать кнопку "Купить в кредит";
2. Заполнить форму тестовыми данными (случайно сгенерированный номер карты);
3. Нажать кнопку "Продолжить".

Ожидаемый результат: появление сообщения об отказе в проведении операции.

#### BT-12. Сценарий проверки данных в БД при оплате тура в кредит по номеру карты не зарегистрированной в сервисе.
Шаги воспроизведения:
1. Нажать кнопку "Купить в кредит";
2. Заполнить форму тестовыми данными (случайно сгенерированный номер карты);
3. Нажать кнопку "Продолжить".

Ожидаемый результат: данные по данной операции отсутствуют в базе данных.

### Проверка полей ввода веб-формы покупки
#### BT-13. Сценарий ввода букв на русском языке в поле 'Номер карты'.
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Ввести в поле 'Номер карты' следующие символы: `номер`.

Ожидаемый результат: поле не принимает на ввод тестовые данные.

#### BT-14. Сценарий ввода букв на английском языке в поле 'Номер карты'.
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Ввести в поле 'Номер карты' следующие символы: `number`.

Ожидаемый результат: поле не принимает на ввод тестовые данные.

#### BT-15. Сценарий ввода спецсимволов в поле 'Номер карты'.
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Ввести в поле 'Номер карты' следующие символы: `/.,`.

Ожидаемый результат: поле не принимает на ввод тестовые данные.

#### BT-16. Сценарий ввода букв на русском языке в поле 'Месяц'.
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Ввести в поле 'Месяц' следующие символы: `мм`.

Ожидаемый результат: поле не принимает на ввод тестовые данные.

#### BT-17. Сценарий ввода букв на английском языке в поле 'Месяц'.
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Ввести в поле 'Месяц' следующие символы: `ff`.

Ожидаемый результат: поле не принимает на ввод тестовые данные.

#### BT-18. Сценарий ввода спецсимволов в поле 'Месяц'.
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Ввести в поле 'Месяц' следующие символы: `/.`.

Ожидаемый результат: поле не принимает на ввод тестовые данные.

#### BT-19. Сценарий ввода букв на русском языке в поле 'Год'.
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Ввести в поле 'Год' следующие символы: `гг`.

Ожидаемый результат: поле не принимает на ввод тестовые данные.

#### BT-20. Сценарий ввода букв на английском языке в поле 'Год'.
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Ввести в поле 'Год' следующие символы: `yy`.

Ожидаемый результат: поле не принимает на ввод тестовые данные.

#### BT-21. Сценарий ввода спецсимволов в поле 'Год'.
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Ввести в поле 'Год' следующие символы: `/.`.

Ожидаемый результат: поле не принимает на ввод тестовые данные.

#### BT-22. Сценарий ввода букв на русском языке в поле 'CVC/CVV'.
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Ввести в поле 'CVC/CVV' следующие символы: `код`.

Ожидаемый результат: поле не принимает на ввод тестовые данные.

#### BT-23. Сценарий ввода букв на английском языке в поле 'CVC/CVV'.
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Ввести в поле 'CVC/CVV' следующие символы: `kod`.

Ожидаемый результат: поле не принимает на ввод тестовые данные.

#### BT-24. Сценарий ввода спецсимволов в поле 'CVC/CVV'.
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Ввести в поле 'CVC/CVV' следующие символы: `/.,`.

Ожидаемый результат: поле не принимает на ввод тестовые данные.

#### BT-25. Сценарий ввода букв на русском языке в поле 'Владелец'.
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Ввести в поле 'Владелец' следующие символы: `Иван Иванов`.

Ожидаемый результат: поле не принимает на ввод тестовые данные.

#### BT-26. Сценарий ввода цифр в поле 'Владелец'.
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Ввести в поле 'Владелец' следующие символы: `12345`.

Ожидаемый результат: поле не принимает на ввод тестовые данные.

#### BT-27. Сценарий ввода спецсимволов в поле 'Владелец'.
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Ввести в поле 'Владелец' следующие символы: `/.,`.

Ожидаемый результат: поле не принимает на ввод тестовые данные.

#### BT-28. Сценарий отправки пустой формы.
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Нажать кнопку "Продолжить".

Ожидаемый результат: форма не отправлена, появление уведомления о неверном формате данных под полем 'Номер карты'.

#### BT-29. Сценарий отправки формы с истекшим сроком действия карты.
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Заполнить форму тестовыми данными:
- Номер карты: 4444 4444 4444 4441 (операции по этой карте проходят со статусом "APPROVED");
- Срок действия карты: дата ранее текущей на 1 месяц;
- Владелец: имя и фамилия на английском языке (например, John Smith);
- Код CVC/CVV: значение от 000 до 999.
3. Нажать кнопку "Продолжить".

Ожидаемый результат: форма не отправлена, появление уведомления о неверном сроке действия карты под полем 'Месяц'.

#### BT-30. Сценарий отправки формы со сроком действия карты позже текущей даты на 5 лет.
Шаги воспроизведения:
1. Нажать кнопку "Купить";
2. Заполнить форму тестовыми данными:
- Номер карты: 4444 4444 4444 4441 (операции по этой карте проходят со статусом "APPROVED");
- Срок действия карты: дата позже текущей на 5 лет и 1 месяц;
- Владелец: имя и фамилия на английском языке (например, John Smith);
- Код CVC/CVV: значение от 000 до 999.
3. Нажать кнопку "Продолжить".

Ожидаемый результат: форма не отправлена, появление уведомления о неверном сроке действия карты под полем 'Месяц'.

## Перечень используемых инструментов
#### 1. Junit5 - среда для создания и запуск тестов;
#### 2. Faker - библиотека для создания тестовых данных;
#### 3. Selenide - фреймворк для работы с веб-элементами;
#### 4. Allure - фреймворк для генерации отчетов;
#### 5. Apache Commons DbUtils — набор классов, делающих работу с JDBC проще;
#### 6. Драйвер, позволяющий подключаться к БД;
#### 7. DBeaver - клиентское приложение для управления базами данных.

## Перечень и описание возможных рисков при автоматизации
#### 1. Нестабильные тесты. Ошибки в коде авто-тестов могут привести к "ложным" результатам;
#### 2. Нестабильное тестовое окружение. Использование симулятора банковских сервисов при автоматизации снижает качество тестирования. Результаты взаимодействия приложения с настоящими банковскими сервисами могут существенно отличаться.
#### 3. Малая зона покрытия. Локальное тестирование комплексного сервиса не охватывает интеграцию приложения с настоящими БД и банковскими сервисами.

## Интервальная оценка с учётом рисков
### 20-30 часов.

## План сдачи работ
#### 1. Авто-тесты - 28.02.2022
#### 2. Отчет о тестировании - 05.03.2022
#### 3. Отчет об автоматизации - 10.03.2022